<!doctype html><html>
<head>
<title> 最长会议间隔时间 &#183; wanglun </title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name=generator content="Hugo 0.89.4">
<link rel=stylesheet href=https://wanglun.org/css/vec.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.ico>
<link href rel=alternate type=application/rss+xml title=wanglun>
</head>
<body>
<header>
<nav>
<ul>
<li class=pull-left>
<a href=https://wanglun.org/>/home/wanglun</a>
</li>
<li class="pull-left current">
<a href=/post>~/post</a>
</li>
<li class=pull-right><a href><i class="fas fa-rss"></i></a></li>
</ul>
</nav>
</header>
<div class="content toc">
<nav id=TableOfContents>
<ul>
<li><a href=#题目>题目</a></li>
<li><a href=#动手实现>动手实现</a></li>
</ul>
</nav>
<section class=post>
<h1 class=post-title><a href=https://wanglun.org/post/rearrange-meetings-longest-break-duration/>最长会议间隔时间</a></h1>
<span class=post-date>Jul 2, 2019 </span>
<div class="post-content markdown-body">
<h2 id=题目>题目</h2>
<p>本次的编码练习题是“最长会议间隔时间”，参考自<a href=https://stackoverflow.com/questions/52135344>https://stackoverflow.com/questions/52135344</a></p>
<p>题目简述如下：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>有一场会议，从0点开始，t点结束。
安排n个演讲者进行演讲，每个演讲者开始时间用数组start表示（共n个元素），
结束时间用finish数组表示（共n个元素），演讲者的演讲顺序不能变。
现在可以调整最多k个演讲者的演讲时间，找出经过调整后，可以得到的最长会议间隔时间。

case 0
input: n=3 k=2 t=15 start=[0, 6, 7] finish=[5, 7, 8]
output: 8

case 1
input: n=1 k=0 t=1000000000 start=[607641287] finish=[607641288]
output: 607641287

case 2
input: n=4 k=2 t=15 start=[4, 6, 7, 10] finish=[5, 7, 8, 11]
output: 6
</code></pre></div><h2 id=动手实现>动手实现</h2>
<p>这道题目可以使用滑动窗口来实现，步骤如下：</p>
<ol>
<li>找到所有会议间的间隔时长数组slots，对于连续的会议，则间隔时长为0</li>
<li>对于给定的k，使用大小为k+1的窗口，在上述slots数组中滑动，并计算窗口内间隔时长之和</li>
<li>上述窗口中，间隔时长之和最大值，即为最长会议间隔</li>
<li>调整方法是，将窗口中的k个会议连接在一起，并安排在窗口的一侧即可</li>
</ol>
<p>以case 0举例如下：</p>
<ol>
<li>slots = [0, 1, 0, 7]</li>
<li>k=2, 则滑动窗口大小为3，得到两个窗口，分别为[0, 1, 0]和[1, 0, 7]</li>
<li>第二个窗口的和最大，即最大会议间隔为8</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=color:#75715e>/*
</span><span style=color:#75715e>You are organizing an event where there will be a number of presenters. The
</span><span style=color:#75715e>event starts at time 0 and time be allocated for networking at any time during
</span><span style=color:#75715e>the event when there is not a presentation being made. The presentations may not
</span><span style=color:#75715e>overlap as they are in the same room, but this allows them to run consecutively,
</span><span style=color:#75715e>without breaks. While the order of speeches cannot be changed, there is a
</span><span style=color:#75715e>maximum number given that indicates how many speeches may be rescheduled. Your
</span><span style=color:#75715e>goal is to maximize the length of the longest networking period you can arrange.
</span><span style=color:#75715e>
</span><span style=color:#75715e>For example, there are n = 4 presenters scheduled for the course of the event
</span><span style=color:#75715e>which begins at time 0 and ends at time t = 15. The meetings start at times
</span><span style=color:#75715e>start =[4, 6, 7, 10] and end at times finish = [5, 7, 8, 11]. You can rearrange
</span><span style=color:#75715e>up to k = 2 meetings.
</span><span style=color:#75715e>
</span><span style=color:#75715e>In this case, we have 4 periods without speakers scheduled: [(0-3), (5), (8-9),
</span><span style=color:#75715e>(11-14)]. The meeting ends after hour 14. If the first meeting is shifted to an
</span><span style=color:#75715e>hour later, a break is created from 0 to 5, 5 hours. If the last speech is moved
</span><span style=color:#75715e>up to 8, it will end at 9 leaving a break from 9 to 15. There is no point to
</span><span style=color:#75715e>moving the middle two speeches in this case. The longest break that can be
</span><span style=color:#75715e>achieved is 15 - 9 = 6 hours by moving the last speech to two hours earlier.
</span><span style=color:#75715e>
</span><span style=color:#75715e>case 0
</span><span style=color:#75715e>input: n=3 k=2 t=15 start=[0, 6, 7] finish=[5, 7, 8]
</span><span style=color:#75715e>output: 8
</span><span style=color:#75715e>
</span><span style=color:#75715e>case 1
</span><span style=color:#75715e>input: n=1 k=0 t=1000000000 start=[607641287] finish=[607641288]
</span><span style=color:#75715e>output: 607641287
</span><span style=color:#75715e>
</span><span style=color:#75715e>case 2
</span><span style=color:#75715e>input: n=4 k=2 t=15 start=[4, 6, 7, 10] finish=[5, 7, 8, 11]
</span><span style=color:#75715e>output: 6
</span><span style=color:#75715e>*/</span>

<span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;vector&gt;</span><span style=color:#75715e>
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>using</span> std<span style=color:#f92672>::</span>max;
<span style=color:#66d9ef>using</span> std<span style=color:#f92672>::</span>vector;

<span style=color:#75715e>/*
</span><span style=color:#75715e> * Complete the &#39;findBreakDuration&#39; function below.
</span><span style=color:#75715e> *
</span><span style=color:#75715e> * The function is expected to return an INTEGER.
</span><span style=color:#75715e> * The function accepts following parameters:
</span><span style=color:#75715e> *  1. INTEGER n
</span><span style=color:#75715e> *  2. INTEGER k
</span><span style=color:#75715e> *  3. INTEGER t
</span><span style=color:#75715e> *  4. INTEGER_ARRAY start
</span><span style=color:#75715e> *  5. INTEGER_ARRAY finish
</span><span style=color:#75715e> */</span>
<span style=color:#75715e>// T: O(n) S: O(n)
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>findBreakDuration</span>(<span style=color:#66d9ef>int</span> n, <span style=color:#66d9ef>int</span> k, <span style=color:#66d9ef>int</span> t, vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> start,
                      vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> finish) {
  <span style=color:#75715e>// build the empty slots
</span><span style=color:#75715e></span>  vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> slots;
  slots.push_back(start[<span style=color:#ae81ff>0</span>]);
  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>&lt;</span> n; <span style=color:#f92672>++</span>i) {
    slots.push_back(start[i] <span style=color:#f92672>-</span> finish[i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]);
  }
  slots.push_back(t <span style=color:#f92672>-</span> finish[n <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>]);

  <span style=color:#75715e>// sliding window with size k+1
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>int</span> cur_len <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> k <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> i <span style=color:#f92672>&lt;</span> slots.size(); <span style=color:#f92672>++</span>i) {
    cur_len <span style=color:#f92672>+=</span> slots[i];
  }
  <span style=color:#66d9ef>int</span> max_len <span style=color:#f92672>=</span> cur_len;
  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; i <span style=color:#f92672>+</span> k <span style=color:#f92672>&lt;</span> slots.size(); <span style=color:#f92672>++</span>i) {
    cur_len <span style=color:#f92672>=</span> cur_len <span style=color:#f92672>-</span> slots[i <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> slots[i <span style=color:#f92672>+</span> k];
    max_len <span style=color:#f92672>=</span> max(max_len, cur_len);
  }

  <span style=color:#66d9ef>return</span> max_len;
}

<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span>() {
  assert(findBreakDuration(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>15</span>, {<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>}, {<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>}) <span style=color:#f92672>==</span> <span style=color:#ae81ff>8</span>);
  assert(findBreakDuration(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1000000000</span>, {<span style=color:#ae81ff>607641287</span>}, {<span style=color:#ae81ff>607641288</span>}) <span style=color:#f92672>==</span>
         <span style=color:#ae81ff>607641287</span>);
  assert(findBreakDuration(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>15</span>, {<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>10</span>}, {<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>11</span>}) <span style=color:#f92672>==</span> <span style=color:#ae81ff>6</span>);

  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
}
</code></pre></div>
</div>
</section>
<section class="pagination clearfix">
<a class="btn previous" href=https://wanglun.org/post/distributed-request-rate-limiting/> 大规模检索系统的分布式限流 </a>
</section>
</div>
<footer>
<div class=footer-info>
<p>
<a href="mailto:me@wanglun.org?subject="><i class="far fa-envelope"></i> me@wanglun.org </a>
{
<a href=https://gohugo.io/ title="Hugo :: A fast and modern static website engine">Hugo 0.89.4</a>,
<a href=https://github.com/IvanChou/yii.im title=vec>Vec</a>
}
{<a href=http://creativecommons.org/licenses/by-nc-nd/3.0/ title="CC BY-NC-ND 3.0">CC BY-NC-ND 3.0</a>}
</p>
</div>
</footer>
<script src=https://wanglun.org/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-30344688-1','auto'),ga('send','pageview')</script>
</body>
</html>